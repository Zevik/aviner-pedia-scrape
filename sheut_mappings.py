#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
מיפוי של כותרות שאלות ותשובות לתתי-קטגוריות
"""

# מיפוי של כותרות לתתי-קטגוריות בשו"ת הלכה
SHEUT_SUBCATEGORY_MAPPINGS = {
    # זוגיות ומשפחה
    'זוגיות ומשפחה': [
        'אישות ומשפחה - הלכה',
        'הלכות דירה וחנוכת הבית',
        'הריון ולידה',
        'חתונה',
        'עבודת הזוגיות',
        'שידוכים',
        'שמירת התא השפחתי',
    ],

    # מדינת ישראל
    'מדינת ישראל': [
        'איסור בשביל מצוות ארץ ישראל',
        'ארץ ישראל',
        'בחירות',
        'דת ומדינה:מדינת ישראל',
        'הלכה:מדינת ישראל',
        'הר הבית ובית המקדש',
        'הרבנות הראשית',
        'ממשלת ישראל',
        'עם ישראל',
        'צה"ל',
    ],

    # מוסר ומידות
    'מוסר ומידות': [
        'גניבה\גזל',
        'גניבה\\גזל',
        'מוסר בחיי הפרט',
        'מוסר חברתי',
        'תשובה',
    ],

    # מועדים
    'מועדים': [
        'אייר תשע"ב',
        'אלול',
        'הלכות חגים לחייל',
        'ט\'\'ו בשבט',
        'ט"ו בשבט',
        'יום העצמאות',
        'יום השואה ויום הזיכרון',
        'יום ירושלים',
        'סוכות',
        'סיון תשע"ב',
        'ספירת העומר',
        'עשרה בטבת',
        'פורים',
        'פורים טיש תשע"ו',
        'פורים: הלכה',
        'פסח - מצה',
        'פסח - שונות',
        'פסח – חמץ וקטניות',
        'פסח – ליל הסדר',
        'פסח – שונות',
        'פסח',
        'פרשת זכור',
        'קצת מדיני חנוכה',
        'ראש השנה',
        'שבועות',
        'שבת',
        'תמוז תשע"ב',
        'תשעה באב:בין המצרים',
    ],

    # מיוחדים
    'מיוחדים': [
        'אישים',
        'דירה - הלכות שונות',
        'הכותל המערבי',
        'הלכות התעטשות',
        'הלכות לבין הזמנים',
        'הר הבית',
        'לוחות הברית',
        'פורים טיש',
    ],

    # תורה
    'תורה': [
        'ישיבה',
        'לימוד תורה',
        'ספרים שונים',
        'פסיקת הלכה',
        'תורת הראי"ה',
        'תורת רבי נחמן מברסלב',
        'תלמידי חכמים',
    ],

    # תפילה
    'תפילה': [
        'ברכות השחר',
        'ברכת כהנים',
        'היה ער כל הלילה - דינים',
        'הכנת הגוף והמקום',
        'הפרדה בין גברים לנשים בתפילה',
        'זמני תפילה',
        'כוונה בתפילה',
        'לפני התפילה - מה מותר ומה אסור',
        'מנחה ומעריב',
        'מנחה(שו"ת)',
        'נוסח והגיה',
        'עניית אמן',
        'קדיש',
        'קריאת התורה - מיוחדים',
        'קריאת התורה',
        'קריאת שמע',
        'שאלות אמוניות',
        'שונות - תפילה',
        'שליח ציבור',
        'שמונה עשרה',
        'תחנון',
        'תפילה - שאלות כלליות',
        'תפילה - שאלות מיוחדות',
        'תפילה בטיסה',
        'תפילה במנין',
        'תפילה במנין 2',
        'תפילה לשלום המדינה',
        'תפילות על דברים שונים',
        'תפילת הדרך',
        'תפילת נשים',
        'תפילת שמונה עשרה',
    ],
}

def get_sheut_subcategory(title):
    """
    מקבל כותרת של שאלה ותשובה ומחזיר את תת-הקטגוריה שלה
    """
    # הסרת (שו"ת) מהכותרת
    title_clean = title.replace('(שו"ת)', '').replace('(שו_ת)', '').strip()

    # חיפוש בכל תת-הקטגוריות
    for subcategory, titles in SHEUT_SUBCATEGORY_MAPPINGS.items():
        for mapped_title in titles:
            # התאמה מדויקת או התאמה חלקית
            if title_clean == mapped_title or title_clean.startswith(mapped_title):
                return subcategory

    # אם לא נמצא, נחזיר "שו"ת לפי נושא" כברירת מחדל
    return 'שו"ת לפי נושא'
